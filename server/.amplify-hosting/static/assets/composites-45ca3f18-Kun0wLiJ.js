import{a9 as b,a as x,R as E}from"./index-CrSqH__w.js";function k({compositeReplacementActiveRange:l,children:a,startInd:n,endInd:e,removedInd:t=null}){return L({compositeReplacementActiveRange:l,children:a,startInd:n,endInd:e,removedInd:t}).newChildren}function L({compositeReplacementActiveRange:l,children:a,startInd:n,endInd:e,removedInd:t=null,potentialListComponents:s=null}){let p=[],d=[],h=n-1;for(let C=0;C<l.length;C++){let g=l[C],u=g.firstInd,f=g.lastInd;if(t!==null){if(u===t||f===t)continue;u>t&&(u-=1),f>t&&(f-=1)}if(u>h&&f<=e){h+1<u&&(p.push(...a.slice(h+1,u)),s&&d.push(...s.slice(h-n+1,u-n)));let y=l.slice(C+1),{newChildren:r,newPotentialListComponents:w}=L({compositeReplacementActiveRange:y,children:a,startInd:u,endInd:f,removedInd:t,potentialListComponents:g.potentialListComponents});w=w.filter((i,R)=>r[R]!==null),r=r.filter(i=>i!==null);let o=w.every(i=>i),c=r.map(i=>typeof i=="string"&&i.trim()==="");if(g.asList&&o&&r.length>1){let i=[r[0]];for(let[R,F]of r.slice(1).entries())!c[R]&&c.slice(R+1).some(_=>!_)&&(i[i.length-1]=j(i[i.length-1]),i.push(", ")),i.push(F);r=i}if(r.length>0){let i=b(g.compositeName);r=x.jsxs(E.Fragment,{children:[x.jsx("a",{name:i}),x.jsx("span",{id:i,children:r})]},i),p.push(r),s&&d.push(o)}h=f}}return h<e&&(p.push(...a.slice(h+1,e+1)),s&&d.push(...s.slice(h-n+1,e-n+1))),{newChildren:p,newPotentialListComponents:d}}function j(l){var a,n;if(typeof l=="string")return l.trimEnd();if(!(((n=(a=l.props)==null?void 0:a.children)==null?void 0:n.length)>0))return l;let e=[...l.props.children],t=e[e.length-1],s=t;for(;typeof s=="string"&&s.trim()==="";){if(e.pop(),e.length===0)return l={...l},l.props={...l.props},l.props.children=[],l;s=e[e.length-1]}return s=j(s),s!==t&&(l={...l},l.props={...l.props},l.props.children=[...e.slice(0,e.length-1),s]),l}export{k as a};
