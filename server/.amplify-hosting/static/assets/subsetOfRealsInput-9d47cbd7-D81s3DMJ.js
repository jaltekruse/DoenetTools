import{q as B,R as $,u as F,r as x,a as t,ax as E,T as k,ao as G,ap as W,V as H}from"./index-CrSqH__w.js";const K=B.text`
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
`,D=$.memo(function(T){let{name:S,id:M,SVs:f,actions:s,callAction:r}=F(T,!1),[d,v]=x.useState("add remove points"),j=x.useRef(null),o=x.useRef(null),X=e=>{r({action:s.recordVisibilityChange,args:{isVisible:e}})};if(x.useEffect(()=>()=>{r({action:s.recordVisibilityChange,args:{isVisible:!1}})},[]),f.hidden)return null;function A(e){e===0?(console.log(e),v("add remove points")):e===1?(console.log(e),v("toggle")):e===2&&(console.log(e),v("move points"))}let P=null;f.fixed||(P=t.jsxs(t.Fragment,{children:[t.jsxs(E,{onClick:A,children:[t.jsx(k,{value:"Add/Remove points"}),t.jsx(k,{value:"Toggle points and intervals"}),t.jsx(k,{value:"Move Points"})]}),t.jsxs(G,{children:[t.jsx(W,{onClick:()=>r({action:s.clear}),value:"Clear"}),t.jsx(W,{onClick:()=>r({action:s.setToR}),value:"R"})]})]}));let m=40,b=36,V=[],w=[];for(let e=-10;e<=10;e++)w.push(e);let I=[];for(let e=m;e<780;e=e+b){V.push(t.jsx("line",{x1:e,y1:"35",x2:e,y2:"45",style:{stroke:"black",strokeWidth:"1"},shapeRendering:"geometricPrecision"},"hash"+e));let n=w.shift();I.push(t.jsx(K,{x:e,y:"66",textAnchor:"middle",children:n},"label"+e))}let h=[];for(let e of f.points){let n=e.inSubset,i=y(e.value),l="var(--mainPurple)";n||(l="white");let a=`point-${i}`;h.push(t.jsx("circle",{cx:i,cy:"40",r:"6",stroke:"black",strokeWidth:"1",fill:l},a))}let R=[];for(let e of f.intervals){if(e.right<e.left||!e.inSubset)continue;let n=y(e.left),i=y(e.right);const l=`lowerIntervalPoint${n}`,a=`higherIntervalPoint${i}`,u=`line${n}-${i}`;let c="var(--mainPurple)",g=n,C=i;n<38&&(g=20,h.push(t.jsx("polygon",{points:"5,40 20,46 20,34",style:{fill:c,stroke:c,strokeWidth:"1"}},l))),i>778&&(C=782,h.push(t.jsx("polygon",{points:"795,40 780,46 780,34",style:{fill:c,stroke:c,strokeWidth:"1"}},a))),R.push(t.jsx("line",{x1:g,y1:"40",x2:C,y2:"40",style:{stroke:c,strokeWidth:"8"}},u))}function y(e){let n=10,i=1,l=e+n;return m+l/i*b}function L(e){let n=e-m,i=10,a=n/b*1;return a=a-i,a}async function p(e,n){let i=e.clientX-j.current.offsetLeft,l=L(i),a=.2;if(n==="up"){if(d==="move points"&&o.current!==null&&(r({action:s.movePoint,args:{pointInd:o.current,value:l,transient:!1}}),o.current=null),d==="add remove points")o.current!==null?r({action:s.deletePoint,args:{pointInd:o.current}}):f.points.map(u=>u.value).includes(l)||r({action:s.addPoint,args:{value:l}});else if(d==="toggle")if(o.current!==null)r({action:s.togglePoint,args:{pointInd:o.current}});else{let u=0;for(let c of f.points)c.value<l&&u++;r({action:s.toggleInterval,args:{intervalInd:u}})}}else if(n==="down"){let u=null;for(let[c,g]of f.points.entries())if(Math.abs(g.value-l)<a){u=c;break}u!==null?o.current=u:o.current=null}else n==="move"?d==="move points"&&o.current!==null&&r({action:s.movePoint,args:{pointInd:o.current,value:l,transient:!0}}):n=="leave"&&d==="move points"&&o.current!==null&&(r({action:s.movePoint,args:{pointInd:o.current,value:l,transient:!1}}),o.current=null)}return t.jsx(H,{partialVisibility:!0,onChange:X,children:t.jsxs(t.Fragment,{children:[t.jsx("a",{name:M}),t.jsx("div",{ref:j,style:{display:"flex",gap:"12px"},children:P}),t.jsxs("svg",{width:"808",height:"80",style:{backgroundColor:"white"},onMouseDown:e=>{p(e,"down")},onMouseUp:e=>{p(e,"up")},onMouseMove:e=>{p(e,"move")},onMouseLeave:e=>{p(e,"leave")},children:[t.jsx("polygon",{points:"5,40 20,50 20,30",style:{fill:"black",stroke:"black",strokeWidth:"1"}}),t.jsx("polygon",{points:"795,40 780,50 780,30",style:{fill:"black",stroke:"black",strokeWidth:"1"}}),R,V,t.jsx("line",{x1:"20",y1:"40",x2:"780",y2:"40",style:{stroke:"black",strokeWidth:"2"}}),h,I]})]})})});export{D as default};
