import{R,u as x,r as i,P as S,i as v,a as l}from"./index-DVZ7nus4.js";import{BoardContext as F,LINE_LAYER_OFFSET as y}from"./graph-1a05b976-BUHOs_UM.js";import"./css-5483d03f-CnY6i4xu.js";const D=R.memo(function h(b){let{name:O,id:c,SVs:e}=x(b);h.ignoreActionsWithoutCore=()=>!0;const t=i.useContext(F);let n=i.useRef(null),r=i.useRef(null);const{darkMode:s}=i.useContext(S)||{};i.useEffect(()=>()=>{r.current!==null&&d()},[]);function g(){if(!e.haveFunction||e.boundaryValues.length!==2||!e.boundaryValues.every(Number.isFinite))return null;let u=s==="dark"?e.selectedStyle.fillColorDarkMode:e.selectedStyle.fillColor,a={name:e.labelForGraph,visible:!e.hidden,withLabel:e.labelForGraph!=="",fixed:!0,layer:10*e.layer+y,fillColor:u,fillOpacity:e.selectedStyle.fillOpacity,highlight:!1,curveLeft:{visible:!1},curveRight:{visible:!1}};a.label={highlight:!1};let o=v(e.fDefinition);return n.current=t.create("functiongraph",o,{visible:!1}),t.create("integral",[e.boundaryValues,n.current],a)}function d(){r.current&&(t.removeObject(r.current),r.current=null,t.removeObject(n.current),n.current=null)}if(t){if(r.current===null)r.current=g();else if(!e.haveFunction||e.boundaryValues.length!==2||!e.boundaryValues.every(Number.isFinite))d();else{let u=v(e.fDefinition);n.current.Y=u,r.current.visProp.visible=!e.hidden,r.current.visPropCalc.visible=!e.hidden;let[a,o]=e.boundaryValues,[m,C]=e.boundaryValues.map(u);r.current.curveLeft.coords.setCoordinates(JXG.COORDS_BY_USER,[a,m]),r.current.curveRight.coords.setCoordinates(JXG.COORDS_BY_USER,[o,C]);let f=10*e.layer+y;r.current.visProp.layer!==f&&r.current.setAttribute({layer:f});let p=s==="dark"?e.selectedStyle.fillColorDarkMode:e.selectedStyle.fillColor;r.current.visProp.fillcolor!==p&&(r.current.visProp.fillcolor=p),r.current.visProp.fillopacity!==e.selectedStyle.fillOpacity&&(r.current.visProp.fillopacity=e.selectedStyle.fillOpacity),r.current.curveLeft.needsUpdate=!0,r.current.curveLeft.update(),r.current.curveLeft.fullUpdate(),r.current.curveRight.needsUpdate=!0,r.current.curveLeft.update(),r.current.curveRight.fullUpdate(),r.current.needsUpdate=!0,r.current.curveLeft.update(),r.current.fullUpdate(),t.update(),t.fullUpdate(),t.updateRenderer()}return l.jsx(l.Fragment,{children:l.jsx("a",{name:c})})}return e.hidden?null:l.jsx(l.Fragment,{children:l.jsx("a",{name:c})})});export{D as default};
