import{R as C,u as v,r as h,e as _,g as A,a as i,V as k}from"./index-DVZ7nus4.js";import{a as B}from"./composites-36499901-DrvBvLfT.js";const w=C.memo(function g(b){let{name:E,id:a,SVs:e,children:c,actions:d,ignoreUpdate:I,rendererName:R,callAction:o}=v(b);g.baseStateVariable="selectedIndices";const[u,m]=h.useState(e.selectedIndices),x=_(A(R));let r=h.useRef(null);!I&&r.current!==e.selectedIndices?(m(e.selectedIndices),r.current=e.selectedIndices):r.current=null;let S=t=>{o({action:d.recordVisibilityChange,args:{isVisible:t}})};h.useEffect(()=>()=>{o({action:d.recordVisibilityChange,args:{isVisible:!1}})},[]);function j(t){let n=[];t.target.value&&(n=Array.from(t.target.selectedOptions,s=>Number(s.value))),(u.length!==n.length||u.some((s,l)=>s!=n[l]))&&(m(n),r.current=e.selectedIndices,x(s=>{let l={...s};return l.ignoreUpdate=!0,l}),o({action:d.updateSelectedIndices,args:{selectedIndices:n},baseVariableValue:n}))}if(e.hidden)return null;let p=[];if(e.separateByTopic)for(let t in e.childrenByTopic){let s=e.childrenByTopic[t].map(function(l){return i.jsx("option",{value:l+1,children:e.childInfo[l].title},l+1)});p.push(i.jsx("optgroup",{label:t,children:s},t))}else p=e.childInfo.map(function(t,n){return i.jsx("option",{value:n+1,children:t.title},n+1)});let V=u[0],f=null;e.label&&(f=e.label+": ");let y=i.jsx("p",{children:i.jsxs("label",{children:[f,i.jsx("select",{className:"custom-select",id:a+"-select",onChange:t=>j(t),value:V,disabled:e.disabled,children:p})]})});return e._compositeReplacementActiveRange&&(c=B({children:c,compositeReplacementActiveRange:e._compositeReplacementActiveRange,startInd:0,endInd:c.length-1})),i.jsx(k,{partialVisibility:!0,onChange:S,children:i.jsxs("section",{id:a,children:[i.jsx("a",{name:a}),y,c]})})});export{w as default};
